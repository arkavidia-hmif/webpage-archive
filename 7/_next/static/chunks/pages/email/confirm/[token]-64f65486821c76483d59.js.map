{"version":3,"sources":["webpack://_N_E/./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?dd38","webpack://_N_E/./pages/email/confirm/[token].tsx"],"names":["window","__NEXT_P","push","ConfirmEmail","apiContext","useContext","ApiContext","authContext","AuthContext","token","useRouter","query","useState","success","setSuccess","error","setError","useEffect","authenticated","confirmEmailAddress","axios","then","e","ApiError","code","EmailVerifyStatus","INVALID_TOKEN","message","title","href","text","padding"],"mappings":"6FACKA,OAAOC,SAAWD,OAAOC,UAAY,IAAIC,KAAK,CAC7C,yBACA,WACE,OAAO,EAAQ,Y,8OC6ERC,UArEgB,WAC7B,IAAMC,EAAaC,qBAAWC,KACxBC,EAAcF,qBAAWG,KAGvBC,EADOC,sBACUC,MAAjBF,MAER,IAAKA,EAAO,OAAO,KAPgB,MASLG,oBAAS,GAAhCC,EAT4B,KASnBC,EATmB,OAUTF,mBAAwB,MAA3CG,EAV4B,KAUrBC,EAVqB,KAoCnC,OAxBAC,qBAAU,WACJV,EAAYW,cACdF,EAAS,gEAIXA,EAAS,MAETG,YAAoBf,EAAWgB,MAAOX,GACnCY,MAAK,WACJP,GAAW,MAFf,OAIS,SAACQ,GAEJA,aAAaC,KACbD,EAAEE,OAASC,IAAkBC,cAE7BV,EAAS,4DAETA,EAASM,EAAEK,eAGhB,IAGD,EAAC,IAAD,CAAaC,MAAM,oBACff,EASE,oBACE,qHAIA,EAAC,IAAD,CAAMgB,KAAK,UACT,EAAC,IAAD,CAAcC,KAAK,QAAQC,QAAQ,mBAdzC,oBACE,EAAC,IAAD,CAAOhB,MAAOA,IACd,mGAJN,kE","file":"static/chunks/pages/email/confirm/[token]-64f65486821c76483d59.js","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/email/confirm/[token]\",\n      function () {\n        return require(\"private-next-pages/email/confirm/[token].tsx\");\n      }\n    ]);\n  ","import { useRouter } from \"next/dist/client/router\";\nimport Link from \"next/link\";\nimport { useContext, useEffect, useState } from \"react\";\nimport Alert from \"../../../components/Alert\";\nimport AuthWrapper from \"../../../components/auth/AuthWrapper\";\nimport FilledButton from \"../../../components/FilledButton\";\nimport { EmailVerifyStatus } from \"../../../interfaces/auth\";\nimport { ApiContext } from \"../../../utils/context/api\";\nimport { AuthContext } from \"../../../utils/context/auth\";\nimport { ApiError } from \"interfaces/api\";\nimport { confirmEmailAddress } from \"api/auth\";\n\nconst ConfirmEmail: React.FC = () => {\n  const apiContext = useContext(ApiContext);\n  const authContext = useContext(AuthContext);\n\n  const router = useRouter();\n  const { token } = router.query;\n\n  if (!token) return null;\n\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (authContext.authenticated) {\n      setError(\"Sedang login dengan akun lain, harap logout terlebih dahulu\");\n      return;\n    }\n\n    setError(null);\n\n    confirmEmailAddress(apiContext.axios, token as string)\n      .then(() => {\n        setSuccess(true);\n      })\n      .catch((e) => {\n        if (\n          e instanceof ApiError &&\n          e.code === EmailVerifyStatus.INVALID_TOKEN\n        ) {\n          setError(\"Tautan ini salah, silakan coba lagi atau hubungi panitia\");\n        } else {\n          setError(e.message);\n        }\n      });\n  }, []);\n\n  return (\n    <AuthWrapper title=\"Konfirmasi Email\">\n      {!success ? (\n        <>\n          <Alert error={error} />\n          <p className=\"my-3\">\n            Tunggu sebentar, kami sedang mengkonfirmasi email Anda\n          </p>\n        </>\n      )\n        : (\n          <>\n            <p className=\"my-3\">\n              Sukses, silahkan login dengan email dan kata sandi yang sudah\n              didaftarkan\n            </p>\n            <Link href=\"/login\">\n              <FilledButton text=\"LOGIN\" padding=\"0.75em 1.5em\" />\n            </Link>\n          </>\n        )}\n\n      <style jsx>\n        {`\n          p {\n            color: #7446a1;\n          }\n        `}\n      </style>\n    </AuthWrapper>\n  );\n};\n\nexport default ConfirmEmail;\n"],"sourceRoot":""}